---
title: 记录下使用Supervisor(进程守护)遇到的一些小问题
date: 2025-01-28 22:16:26+08:00
lastMod: 2025-01-28 22:59:28+08:00
summary: 本文介绍了如何将qexo从screen迁移到Supervisor进行守护进程运行，并解决了迁移过程中遇到的两个问题。首先，由于Supervisor环境变量不完整，文章指出需要手动在`/etc/supervisor/conf.d/env.conf`中添加环境变量`PYTHONPATH`，其值应为`echo $PATH`的输出结果。其次，文章解决了git push时提示未配置昵称和邮件地址的问题。作者建议使用`git config --global user.email`和`git config --global user.name`命令进行配置，并为了方便Supervisor读取，将`/root/.gitconfig`的内容追加到`/etc/gitconfig`。  文章最后提示后续会更新更多问题的解决方法。
tags: []
sticky: 0
---

前言：因为我的qexo一直以来都是通过screen直接运行的，这样虽然省事，但每次vps重启，以及qexo自己更新，都要进screen会话重新运行，所以就迁移到Supervisor进程守护运行

**1、环境变量问题**

由于Supervisor的环境变量并不是很全，所以需要手动在配置文件里添加一下

查看当前的环境变量

```bash
echo $PATH
```

创建文件

```bash
touch /etc/supervisor/conf.d/env.conf 
```

```bash
vim /etc/supervisor/conf.d/env.conf 
```

填写以下内容

```bash
environment=PYTHONPATH="刚才运行echo $PATH输出的内容"
```


**2、git在push代码时提示未配置昵称和邮件地址**

如果你不确定你有没有配置，可以输出下面命令查看

```bash
git config --list
```

查看`user.email`和`user.name`，如果不存在，则说明当前用户压根没配置，请运行

`git config --global user.email "you@example.com"`
`git config --global user.name "Your Name"`


这两条命令其实只会为当前用户配置，也就是~/.gitconfig目录下

可以输入`git config --list --show-origin`查看

为了让Supervisor读取，则需要丢到/etc/gitconfig下（如果你的vps有多用户，且不方便给其他用户查看，可使用其他方案）

```bash
cat /root/.gitconfig >> /etc/gitconfig
```


**后面如果又遇到其他问题，且我解决了，则会再次更新此文章**
