---
title: 解决服务器smtp端口出站流量被阻断
date: 2025-02-08 01:46:02+08:00
lastMod: 2025-02-08 02:08:48+08:00
summary: 本文介绍了如何解决Alicenetwork VPS无法通过阿里云企业邮SMTP服务器发信的问题。由于疑似上游阻断或阿里云限制，作者建议使用华为云服务器作为反向代理，转发邮件到阿里云SMTP服务器。  文章推荐使用WireGuard或EasyTier进行服务器组网，并详细描述了在Ubuntu/Debian系统上安装Nginx，以及配置Nginx作为反向代理，监听465端口并将邮件转发到`smtp.qiye.aliyun.com:465`。最后，文章简述了使用1Panel简化配置的方法，只需修改`/etc/hosts`文件即可。  总而言之，本文提供了一种绕过网络限制发送邮件的解决方案，并提供了详细的配置步骤。
category: nginx
tags:
- nginx
- mail
- smtp
sticky: 0
---

> 我手上这台alicenetwork vps就无法通过阿里云企业邮smtp服务器发信，ping正常，其他端口也正常，应该是上游阻断或阿里云限制了，所以用华为云反代一下阿里的smtp

## 准备

> 需要一台可以正常向邮件服务器smtp发信的服务器，并且服务器之间最好组个网

组网推荐用 `wireguard`、`easytier`

前者通用型强，连linux维护者也推崇，后者配置简单，性能也不差，官网：https://easytier.cn/

## 安装nginx

ubuntu、debian

```bash
apt-get install nginx
```

## 编写配置文件

在转发机上的nginx.conf中添加

```nginx
stream {
	server {
		listen 465;
		proxy_pass smtp.qiye.aliyun.com:465;
	}
}
```

1panel：


 ![](https://file.butlanys.de/img/8b6c1555f493ec55f5b70479d8bc8bc9.jpg)

## 使用

仅需在/etc/hosts中新增

`<转发机IP> <smtp域名>`

即可，docker中可以也可以通过挂载只读的hosts文件到容器内部就能使用
